var JSONPatchQueueSynchronous=function(a,b,c){this.waiting=[],this.versionPath=a,this.apply=b,this.purist=c};JSONPatchQueueSynchronous.prototype.version=0,JSONPatchQueueSynchronous.prototype.receive=function(a,b,c){var d=c||this.apply,e=b.slice(0);if(this.purist){e.shift()}var f=e.shift(),g=f.value;if(g<=this.version)throw new Error("Given version was already applied.");if(g==this.version+1)for(;e;)this.version++,d(a,e),e=this.waiting.shift();else this.waiting[g-this.version-2]=e},JSONPatchQueueSynchronous.prototype.send=function(a){this.version++;var b=a.slice(0);return b.unshift({op:"replace",path:this.versionPath,value:this.version}),this.purist&&b.unshift({op:"test",path:this.versionPath,value:this.version-1}),b},JSONPatchQueueSynchronous.getPropertyByJsonPointer=function(a,b){var c=b.split("/");""===c[0]&&c.shift();for(var d=a;c.length;){var e=c.shift().replace("~1","/").replace("~0","~");c.length&&(d=d[e])}return d[e]},JSONPatchQueueSynchronous.prototype.reset=function(a,b){this.version=JSONPatchQueueSynchronous.getPropertyByJsonPointer(b,this.versionPath),this.waiting=[];var c=[{op:"replace",path:"",value:b}];this.apply(a,c)},void 0!==typeof module&&(module.exports=JSONPatchQueueSynchronous,module.exports.default=JSONPatchQueueSynchronous,module.exports.__esModule=!0);
//# sourceMappingURL=json-patch-queue-synchronous.min.js.map