var JSONPatchQueue=function(a,b,c){this.waiting=[],this.localPath=a[0],this.remotePath=a[1],this.apply=b,this.purist=c};JSONPatchQueue.prototype.localVersion=0,JSONPatchQueue.prototype.remoteVersion=0,JSONPatchQueue.prototype.receive=function(a,b,c){var d=c||this.apply,e=b.slice(0);if(this.purist){e.shift()}var f=e.shift(),g=f.value;if(g<=this.remoteVersion)throw new Error("Given version was already applied.");if(g==this.remoteVersion+1)for(;e;)this.remoteVersion++,d(a,e),e=this.waiting.shift();else this.waiting[g-this.remoteVersion-2]=e},JSONPatchQueue.prototype.send=function(a){this.localVersion++;var b=a.slice(0);return this.purist?b.unshift({op:"test",path:this.localPath,value:this.localVersion-1},{op:"replace",path:this.localPath,value:this.localVersion}):b.unshift({op:"replace",path:this.localPath,value:this.localVersion}),b},JSONPatchQueue.getPropertyByJsonPointer=function(a,b){var c=b.split("/");""===c[0]&&c.shift();for(var d=a;c.length;){var e=c.shift().replace("~1","/").replace("~0","~");c.length&&(d=d[e])}return d[e]},JSONPatchQueue.prototype.reset=function(a,b){this.remoteVersion=JSONPatchQueue.getPropertyByJsonPointer(b,this.remotePath),this.waiting=[];var c=[{op:"replace",path:"",value:b}];this.apply(a,c)},void 0!==typeof module&&(module.exports=JSONPatchQueue,module.exports.default=JSONPatchQueue,module.exports.__esModule=!0);
//# sourceMappingURL=json-patch-queue.min.js.map